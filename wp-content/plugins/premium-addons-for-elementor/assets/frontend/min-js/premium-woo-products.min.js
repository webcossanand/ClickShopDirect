(g=>{function t(e,o){new premiumWooProducts(e).init()}window.premiumWooProducts=function(n){var e,r,d,o,t,i,a,s=this,u=n.find(".premium-woocommerce"),c=u.data("skin"),l=null,m=!0,p=u.data("quick-view");"yes"===p&&(a=n.data("id"),e=u.siblings(".premium-woo-quick-view-"+a),r=e.find("#premium-woo-quick-view-modal"),d=r.find("#premium-woo-quick-view-content"),o=r.find(".premium-woo-content-main-wrapper"),t=e.find(".premium-woo-quick-view-back"),i=e.find(".premium-woo-quick-view-loader"),a=getComputedStyle(e[0]).getPropertyValue("--pa-qv-align"),r.addClass(a)),s.init=function(){s.handleProductsCarousel(),s.handleMarqueeEffect(),"yes"===p&&s.handleProductQuickView(),s.handleProductPagination(),s.handleLoadMore(),s.handleAddToCart(),"grid_6"===c&&s.handleGalleryImages(),["grid_7","grid_11"].includes(c)&&(s.handleGalleryCarousel(c),"grid_11"===c)&&s.handleGalleryNav(),u.hasClass("premium-woo-products-masonry")&&(s.handleGridMasonry(),g(window).on("resize",s.handleGridMasonry)),n.hasClass("premium-woo-title-above-yes")&&s.handleTitlePos(),g(document).on("berocket_ajax_products_loaded",function(){s.handleGalleryCarousel()})},s.getIsoTopeSettings=function(){return{itemSelector:"li.product",percentPosition:!0,animationOptions:{duration:750,easing:"linear",queue:!1},layoutMode:"masonry"}},s.handleTitlePos=function(){var e=0<u.find(".woocommerce-loop-product__title").length,o=0<u.find(".premium-woo-product-thumbnail .woocommerce-loop-product__link img").length;e&&o&&(u.find("li.product").each(function(e,o){var t=g(o).find(".woocommerce-loop-product__title").parent(),o=g(o).find(".premium-woo-product-thumbnail");t.insertBefore(o)}),u.find(".premium-woo-product__link").css("opacity",1))},s.handleProductsCarousel=function(){var e,o=u.data("woo_carousel");o&&(e=u.find("ul.products"),o.customPaging=function(){return'<i class="fas fa-circle"></i>'},o.arrowCustomPos&&(o.appendArrows=u.find(".premium-carousel-arrows-wrapper")),e.on("init",function(e){setTimeout(function(){u.removeClass("premium-carousel-hidden")},100)}),e.find("li.product").length<o.slidesToShow?(u.removeClass("premium-carousel-hidden"),e.find("li.product").css("width",100/o.slidesToShow+"%")):e.slick(o))},s.handleMarqueeEffect=function(){var o,e,t,i,n,a;u.hasClass("premium-woo-products-marquee")&&(o=u.find("ul.products"),t=(e=u.data("woo_marquee")).direction,i=getComputedStyle(o[0]).getPropertyValue("--pa-marquee-spacing"),this.cloneItems(),n=this.setHorizontalWidth(i),a="normal"===t?gsap.to(o,{x:-n,duration:e.speed||50,ease:"none",repeat:-1,modifiers:{x:gsap.utils.unitize(e=>parseFloat(e)%n)}}):(gsap.set(o[0],{x:-n}),gsap.to(o,{x:0,duration:e.speed||50,ease:"none",repeat:-1,modifiers:{x:gsap.utils.unitize(e=>{e=parseFloat(e);return 0<e?e-n:e})}})),u.removeClass("premium-carousel-hidden"),e.draggable&&!elementorFrontend.isEditMode()&&Draggable.create(o,{type:"x",inertia:!1,onDragStart:function(){a.pause()},onDragEnd:function(){var e=gsap.getProperty(o[0],"x");gsap.set(o[0],{x:(e%n+n)%n-n}),a.invalidate().restart()},onDrag:function(){var e=gsap.getProperty(o[0],"x");0<e?gsap.set(o[0],{x:e-n}):e<-n&&gsap.set(o[0],{x:e+n})}}),u.hover(function(){a.pause()},function(){a.play()}))},s.cloneItems=function(){var e=u.find("ul.products"),o=e.find("li.product"),t=new DocumentFragment;o.each(function(){var e=g(this).clone(!0,!0)[0];t.appendChild(e)}),e.append(t)},s.setHorizontalWidth=function(e){var e=parseFloat(e)||0,o=u.find("li.product");return(o[0].offsetWidth+e)*(o.length/2)},s.handleGridMasonry=function(){var e=u.find("ul.products");e.imagesLoaded(function(){}).done(function(){e.isotope({itemSelector:"li.product",percentPosition:!0,animationOptions:{duration:750,easing:"linear",queue:!1},layoutMode:"masonry"})})},s.handleProductQuickView=function(){e.appendTo(document.body),u.on("click",".premium-woo-qv-btn, .premium-woo-qv-data",s.triggerQuickViewModal),window.addEventListener("resize",function(){s.updateQuickViewHeight()})},s.triggerQuickViewModal=function(e){e.preventDefault();e=g(this).data("product-id");r.hasClass("loading")||r.addClass("loading"),t.hasClass("premium-woo-quick-view-active")||t.addClass("premium-woo-quick-view-active"),n.hasClass("static-products")?s.getStaticQuickView(e):s.getProductByAjax(e),s.addCloseEvents()},s.getStaticQuickView=function(e){g.ajax({url:PAWooProductsSettings.ajaxurl,data:{action:"get_elementor_template_content",templateID:e,is_id:!0},type:"GET",beforeSend:function(){i.append('<div class="premium-loading-feed"><div class="premium-loader"></div></div>')},success:function(e){i.find(".premium-loading-feed").remove(),u.trigger("qv_loaded"),d.html(e.data.template_content),s.handleQuickViewModal()},error:function(e){console.log(e)}})},s.getProductByAjax=function(e){var o=u.data("page-id");g.ajax({url:PAWooProductsSettings.ajaxurl,data:{action:"get_woo_product_qv",pageID:o,elemID:n.data("id"),product_id:e,security:PAWooProductsSettings.qv_nonce},dataType:"html",type:"POST",beforeSend:function(){i.append('<div class="premium-loading-feed"><div class="premium-loader"></div></div>')},success:function(e){i.find(".premium-loading-feed").remove(),u.trigger("qv_loaded"),d.html(e),s.handleQuickViewModal()},error:function(e){console.log(e)}})},s.addCloseEvents=function(){var e=r.find(".premium-woo-quick-view-close");g(document).keyup(function(e){27===e.keyCode&&s.closeModal()}),e.on("click",function(e){e.preventDefault(),s.closeModal()}),o.on("click",function(e){this===e.target&&s.closeModal()})},s.handleQuickViewModal=function(){d.imagesLoaded(function(){s.handleQuickViewSlider()})},s.getBarWidth=function(){var e=g('<div style="width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;"><div style="height:100px;"></div>'),o=(g("body").append(e),g("div",e).innerWidth()),t=(e.css("overflow-y","scroll"),g("div",e).innerWidth());return g(e).remove(),o-t},s.handleQuickViewSlider=function(){var e=r.find(".premium-woo-qv-image-slider");1<e.find("li").length?e.flexslider({animation:"slide",nextText:"",prevText:"",start:function(e){setTimeout(function(){s.updateQuickViewHeight(!0,!0)},300)}}):setTimeout(function(){s.updateQuickViewHeight(!0)},300),r.hasClass("active")||setTimeout(function(){r.removeClass("loading").addClass("active");var e=s.getBarWidth();g("html").css("margin-right",e),g("html").addClass("premium-woo-qv-opened")},350)},s.updateQuickViewHeight=function(e,o){var t=d,i=t.find(".product .premium-woo-qv-image-slider").first().height(),n=t.find(".premium-woo-product-summary"),a=n.css("content");void 0!==a&&544==a.replace(/[^0-9]/g,"")&&0!=i&&null!==i?n.css("height",i):n.css("height",""),!0===e&&r.css("opacity",1),o&&t.find(".product .premium-woo-qv-image-slider img").height(n.outerHeight())},s.closeModal=function(){t.removeClass("premium-woo-quick-view-active"),r.removeClass("active").removeClass("loading"),g("html").removeClass("premium-woo-qv-opened"),g("html").css("margin-right",""),setTimeout(function(){d.html("")},600)},s.handleAddToCart=function(){u.on("click",".instock .premium-woo-cart-btn.product_type_simple",s.onAddCartBtnClick).on("premium_product_add_to_cart",s.handleAddCartBtnClick).on("click",".instock .premium-woo-atc-button .button.product_type_simple",s.onAddCartBtnClick).on("premium_product_add_to_cart",s.handleAddCartBtnClick)},s.onAddCartBtnClick=function(e){var o=g(this),t=o.data("product_id");!t||o.parent().data("variations")||o.data("added-to-cart")||(e.preventDefault(),o.removeClass("added").addClass("adding"),o.hasClass("premium-woo-cart-btn")||o.append('<span class="premium-woo-cart-loader fas fa-cog"></span>'),g.ajax({url:PAWooProductsSettings.ajaxurl,type:"POST",data:{action:"premium_woo_add_cart_product",nonce:PAWooProductsSettings.cta_nonce,product_id:t,quantity:1},success:function(){g(document.body).trigger("wc_fragment_refresh"),u.trigger("premium_product_add_to_cart",[o]),"grid_10"!==c&&o.hasClass("premium-woo-cart-btn")||setTimeout(function(){var e=o.siblings(".added_to_cart").text();""==(e=""==e?n.data("woo-cart-text")||"":e)&&(e=PAWooProductsSettings.view_cart),o.removeClass("add_to_cart_button").attr("href",PAWooProductsSettings.woo_cart_url).text(e),o.attr("data-added-to-cart",!0)},200)}}))},s.handleAddCartBtnClick=function(e,o){o&&o.removeClass("adding").addClass("added")},s.handleGalleryImages=function(){u.on("click",".premium-woo-product__gallery_image",function(){var e=g(this),o=e.closest(".premium-woo-product-thumbnail"),t=e.attr("src");o.find(".premium-woo-product__on_hover").length<1?o.find(".woocommerce-loop-product__link img").replaceWith(e.clone(!0)):o.find(".premium-woo-product__on_hover").attr("src",t)})},s.handleGalleryNav=function(){u.on("click",".premium-woo-product-gallery-images .premium-woo-product__gallery_image",function(){var e=g(this).parentsUntil(".premium-woo-product-wrapper")[2],e=g(e).siblings(".premium-woo-product-thumbnail").find(".premium-woo-product-thumbnail-wrapper"),o=g(this).index()+1;e.slick("slickGoTo",o)})},s.handleGalleryCarousel=function(e){var o=u.find(".premium-woo-product-thumbnail-wrapper"),t={infinite:"grid_11"!==e,slidesToShow:1,slidesToScroll:1,draggable:!0,autoplay:!1,rtl:elementorFrontend.config.is_rtl};"grid_11"!==e?(t.nextArrow='<a type="button" data-role="none" class="carousel-arrow carousel-next" aria-label="Next" role="button" style=""><i class="fas fa-angle-right" aria-hidden="true"></i></a>',t.prevArrow='<a type="button" data-role="none" class="carousel-arrow carousel-prev" aria-label="Previous" role="button" style=""><i class="fas fa-angle-left" aria-hidden="true"></i></a>'):t.arrows=!1,o.each(function(e,o){1<($imgs=g(o).find("a").length)&&g(o).not(".slick-initialized").slick(t)})},s.handleLoadMore=function(){var t=u.find(".premium-woo-load-more-btn"),i=2,o=u.data("page-id");t.length<1||t.on("click",function(e){m&&(m=!1,u.find("ul.products").after('<div class="premium-loading-feed"><div class="premium-loader"></div></div>'),t.css("opacity",.3),g.ajax({url:PAWooProductsSettings.ajaxurl,data:{action:"get_woo_products",pageID:o,elemID:n.data("id"),category:t.data("tax"),orderBy:t.data("order"),skin:c,page_number:i,nonce:PAWooProductsSettings.products_nonce},dataType:"json",type:"POST",success:function(e){l=e.data.html;var e=t.data("products")-l.match(/<li/g).length,o=(e<1&&t.remove(),m=!0,u.find(".premium-loading-feed").remove(),t.css("opacity",1),u.find("ul.products"));l=(l=l.replace(l.substring(0,l.indexOf(">")+1),"")).replace("</ul>",""),t.find(".premium-woo-products-num").text("("+e+")"),t.data("products",e),o.append(l),u.hasClass("premium-woo-products-masonry")&&(o.isotope("reloadItems"),setTimeout(function(){o.isotope({itemSelector:"li.product",percentPosition:!0,layoutMode:"masonry"})},100)),"grid_7"!==c&&"grid_11"!==c||s.handleGalleryCarousel(c),i++},error:function(e){console.log(e)}}))})},s.handleProductPagination=function(){u.on("click",".premium-woo-products-pagination a.page-numbers",function(e){var o,t,i=g(this);u.hasClass("premium-woo-query-main")||(e.preventDefault(),u.find("ul.products").after('<div class="premium-loading-feed"><div class="premium-loader"></div></div>'),e=u.data("page-id"),o=parseInt(u.find(".page-numbers.current").html()),t=1,t=i.hasClass("next")?o+1:i.hasClass("prev")?o-1:i.html(),g.ajax({url:PAWooProductsSettings.ajaxurl,data:{action:"get_woo_products",pageID:e,elemID:n.data("id"),category:"",skin:c,page_number:t,nonce:PAWooProductsSettings.products_nonce},dataType:"json",type:"POST",success:function(e){u.find(".premium-loading-feed").remove(),g("html, body").animate({scrollTop:n.find(".premium-woocommerce").offset().top-100},"slow"),u.find("ul.products").replaceWith(e.data.html),u.find(".premium-woo-products-pagination").replaceWith(e.data.pagination),"grid_7"!==c&&"grid_11"!==c||s.handleGalleryCarousel(c),u.hasClass("premium-woo-products-masonry")&&s.handleGridMasonry()},error:function(e){console.log(e)}}))})}},g(window).on("elementor/frontend/init",function(){if("undefined"!=typeof paElementsHandler&&paElementsHandler.isElementAlreadyExists("paWooProducts"))return!1;0<g(".static-products").length?g(".elementor-widget-premium-woo-products").map(function(e,o){t(g(o))}):(elementorFrontend.hooks.addAction("frontend/element_ready/premium-woo-products.grid-1",t),elementorFrontend.hooks.addAction("frontend/element_ready/premium-woo-products.grid-2",t),elementorFrontend.hooks.addAction("frontend/element_ready/premium-woo-products.grid-3",t),elementorFrontend.hooks.addAction("frontend/element_ready/premium-woo-products.grid-4",t),elementorFrontend.hooks.addAction("frontend/element_ready/premium-woo-products.grid-5",t),elementorFrontend.hooks.addAction("frontend/element_ready/premium-woo-products.grid-6",t),elementorFrontend.hooks.addAction("frontend/element_ready/premium-woo-products.grid-7",t),elementorFrontend.hooks.addAction("frontend/element_ready/premium-woo-products.grid-8",t),elementorFrontend.hooks.addAction("frontend/element_ready/premium-woo-products.grid-9",t),elementorFrontend.hooks.addAction("frontend/element_ready/premium-woo-products.grid-10",t),elementorFrontend.hooks.addAction("frontend/element_ready/premium-woo-products.grid-11",t))})})(jQuery);